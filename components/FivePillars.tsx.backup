'use client';

import { useState, useEffect, JSX } from 'react';
import Script from 'next/script';

// Types
type ProductType = 'essentials' | 'longevity';

interface Pillar {
  id: number;
  number: string;
  icon: JSX.Element;
  label: string;
  preview: string;
  title: string;
  tagline: string;
  description?: string;
  benefits: string[];
}

interface FeatureCard {
  icon: JSX.Element;
  title: string;
  text: string;
}

// Pillar Icons
const PillarIcons = {
  essentials: {
    pillar1: (
      <svg viewBox="0 0 48 48" fill="none" xmlns="http://www.w3.org/2000/svg" aria-hidden="true">
        <rect x="14" y="8" width="20" height="32" rx="10" stroke="currentColor" strokeWidth="2" />
        <path d="M14 24H34" stroke="currentColor" strokeWidth="2" />
        <circle cx="20" cy="16" r="2" fill="currentColor" />
        <circle cx="28" cy="16" r="2" fill="currentColor" />
        <circle cx="24" cy="32" r="3" stroke="currentColor" strokeWidth="2" />
        <circle cx="24" cy="32" r="1" fill="currentColor" />
      </svg>
    ),
    pillar2: (
      <svg viewBox="0 0 48 48" fill="none" xmlns="http://www.w3.org/2000/svg" aria-hidden="true">
        <path d="M18 8C18 8 14 8 14 12V14C14 18 18 20 18 24C18 28 14 30 14 34V36C14 40 18 40 18 40" stroke="currentColor" strokeWidth="2" strokeLinecap="round" />
        <path d="M30 8C30 8 34 8 34 12V14C34 18 30 20 30 24C30 28 34 30 34 34V36C34 40 30 40 30 40" stroke="currentColor" strokeWidth="2" strokeLinecap="round" />
        <path d="M18 16H30" stroke="currentColor" strokeWidth="2" strokeLinecap="round" />
        <path d="M18 24H30" stroke="currentColor" strokeWidth="2" strokeLinecap="round" />
        <path d="M18 32H30" stroke="currentColor" strokeWidth="2" strokeLinecap="round" />
      </svg>
    ),
    pillar3: (
      <svg viewBox="0 0 48 48" fill="none" xmlns="http://www.w3.org/2000/svg" aria-hidden="true">
        <path d="M24 8C24 8 12 12 12 28C12 36 18 40 24 40C30 40 36 36 36 28C36 12 24 8 24 8Z" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" />
        <path d="M24 14V36" stroke="currentColor" strokeWidth="2" strokeLinecap="round" />
        <path d="M18 20L24 24" stroke="currentColor" strokeWidth="1.5" strokeLinecap="round" />
        <path d="M30 20L24 24" stroke="currentColor" strokeWidth="1.5" strokeLinecap="round" />
        <path d="M16 28L24 32" stroke="currentColor" strokeWidth="1.5" strokeLinecap="round" />
        <path d="M32 28L24 32" stroke="currentColor" strokeWidth="1.5" strokeLinecap="round" />
      </svg>
    ),
    pillar4: (
      <svg viewBox="0 0 48 48" fill="none" xmlns="http://www.w3.org/2000/svg" aria-hidden="true">
        <circle cx="24" cy="24" r="14" stroke="currentColor" strokeWidth="2" />
        <circle cx="24" cy="24" r="8" stroke="currentColor" strokeWidth="2" />
        <circle cx="24" cy="24" r="3" fill="currentColor" />
        <path d="M24 6V10" stroke="currentColor" strokeWidth="2" strokeLinecap="round" />
        <path d="M24 38V42" stroke="currentColor" strokeWidth="2" strokeLinecap="round" />
        <path d="M6 24H10" stroke="currentColor" strokeWidth="2" strokeLinecap="round" />
        <path d="M38 24H42" stroke="currentColor" strokeWidth="2" strokeLinecap="round" />
      </svg>
    ),
    pillar5: (
      <svg viewBox="0 0 48 48" fill="none" xmlns="http://www.w3.org/2000/svg" aria-hidden="true">
        <circle cx="24" cy="24" r="16" stroke="currentColor" strokeWidth="2" />
        <circle cx="24" cy="24" r="8" stroke="currentColor" strokeWidth="2" />
        <circle cx="24" cy="24" r="3" fill="currentColor" />
        <path d="M24 8V16" stroke="currentColor" strokeWidth="1.5" strokeLinecap="round" strokeDasharray="2 2" />
        <path d="M24 32V40" stroke="currentColor" strokeWidth="1.5" strokeLinecap="round" strokeDasharray="2 2" />
        <path d="M8 24H16" stroke="currentColor" strokeWidth="1.5" strokeLinecap="round" strokeDasharray="2 2" />
        <path d="M32 24H40" stroke="currentColor" strokeWidth="1.5" strokeLinecap="round" strokeDasharray="2 2" />
      </svg>
    )
  },
  longevity: {
    pillar1: (
      <svg viewBox="0 0 48 48" fill="none" xmlns="http://www.w3.org/2000/svg" aria-hidden="true">
        <path d="M12 28L24 22L36 28L24 34L12 28Z" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" />
        <path d="M12 20L24 14L36 20L24 26L12 20Z" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" />
        <path d="M12 20V28" stroke="currentColor" strokeWidth="2" strokeLinecap="round" />
        <path d="M36 20V28" stroke="currentColor" strokeWidth="2" strokeLinecap="round" />
        <path d="M24 26V34" stroke="currentColor" strokeWidth="2" strokeLinecap="round" />
      </svg>
    ),
    pillar2: (
      <svg viewBox="0 0 48 48" fill="none" xmlns="http://www.w3.org/2000/svg" aria-hidden="true">
        <path d="M24 8L36 14V24C36 32 30 38 24 40C18 38 12 32 12 24V14L24 8Z" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" />
        <circle cx="24" cy="24" r="6" stroke="currentColor" strokeWidth="2" />
        <circle cx="24" cy="24" r="2" fill="currentColor" />
      </svg>
    ),
    pillar3: (
      <svg viewBox="0 0 48 48" fill="none" xmlns="http://www.w3.org/2000/svg" aria-hidden="true">
        <path d="M26 8L14 26H24L22 40L34 22H24L26 8Z" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" />
        <circle cx="24" cy="24" r="16" stroke="currentColor" strokeWidth="2" strokeDasharray="4 4" />
      </svg>
    ),
    pillar4: (
      <svg viewBox="0 0 48 48" fill="none" xmlns="http://www.w3.org/2000/svg" aria-hidden="true">
        <path d="M24 8C15.163 8 8 15.163 8 24" stroke="currentColor" strokeWidth="2" strokeLinecap="round" />
        <path d="M24 40C32.837 40 40 32.837 40 24" stroke="currentColor" strokeWidth="2" strokeLinecap="round" />
        <path d="M8 24C8 32.837 15.163 40 24 40" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeDasharray="4 4" />
        <path d="M40 24C40 15.163 32.837 8 24 8" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeDasharray="4 4" />
        <path d="M24 4L24 12" stroke="currentColor" strokeWidth="2" strokeLinecap="round" />
        <path d="M20 8L24 4L28 8" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" />
        <path d="M24 44L24 36" stroke="currentColor" strokeWidth="2" strokeLinecap="round" />
        <path d="M28 40L24 44L20 40" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" />
      </svg>
    ),
    pillar5: (
      <svg viewBox="0 0 48 48" fill="none" xmlns="http://www.w3.org/2000/svg" aria-hidden="true">
        <path d="M38 24C38 31.732 31.732 38 24 38C16.268 38 10 31.732 10 24C10 16.268 16.268 10 24 10" stroke="currentColor" strokeWidth="2" strokeLinecap="round" />
        <path d="M24 10L30 4" stroke="currentColor" strokeWidth="2" strokeLinecap="round" />
        <path d="M24 10L30 16" stroke="currentColor" strokeWidth="2" strokeLinecap="round" />
        <circle cx="24" cy="24" r="6" stroke="currentColor" strokeWidth="2" />
      </svg>
    )
  }
};

// Feature Card Icons  
const FeatureIcons = {
  essentials: {
    card1: (
      <svg viewBox="0 0 48 48" fill="none" xmlns="http://www.w3.org/2000/svg" aria-hidden="true">
        <circle cx="24" cy="16" r="8" stroke="currentColor" strokeWidth="2" />
        <path d="M16 24V36C16 38.2091 17.7909 40 20 40H28C30.2091 40 32 38.2091 32 36V24" stroke="currentColor" strokeWidth="2" strokeLinecap="round" />
        <path d="M20 28H28" stroke="currentColor" strokeWidth="2" strokeLinecap="round" />
        <path d="M20 34H28" stroke="currentColor" strokeWidth="2" strokeLinecap="round" />
      </svg>
    ),
    card2: (
      <svg viewBox="0 0 48 48" fill="none" xmlns="http://www.w3.org/2000/svg" aria-hidden="true">
        <circle cx="24" cy="24" r="14" stroke="currentColor" strokeWidth="2" />
        <path d="M16 24L22 30L32 18" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" />
      </svg>
    ),
    card3: (
      <svg viewBox="0 0 48 48" fill="none" xmlns="http://www.w3.org/2000/svg" aria-hidden="true">
        <path d="M24 8L28 16H38L30 22L34 32L24 26L14 32L18 22L10 16H20L24 8Z" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" />
        <circle cx="24" cy="38" r="4" stroke="currentColor" strokeWidth="2" />
      </svg>
    )
  },
  longevity: {
    card1: (
      <svg viewBox="0 0 48 48" fill="none" xmlns="http://www.w3.org/2000/svg" aria-hidden="true">
        <rect x="14" y="8" width="20" height="32" rx="4" stroke="currentColor" strokeWidth="2" />
        <path d="M14 20H34" stroke="currentColor" strokeWidth="2" />
        <path d="M20 14V20" stroke="currentColor" strokeWidth="2" strokeLinecap="round" />
        <path d="M28 14V20" stroke="currentColor" strokeWidth="2" strokeLinecap="round" />
        <path d="M24 26V34" stroke="currentColor" strokeWidth="2" strokeLinecap="round" />
        <path d="M20 30H28" stroke="currentColor" strokeWidth="2" strokeLinecap="round" />
      </svg>
    ),
    card2: (
      <svg viewBox="0 0 48 48" fill="none" xmlns="http://www.w3.org/2000/svg" aria-hidden="true">
        <circle cx="16" cy="24" r="6" stroke="currentColor" strokeWidth="2" />
        <circle cx="32" cy="24" r="6" stroke="currentColor" strokeWidth="2" />
        <circle cx="24" cy="14" r="6" stroke="currentColor" strokeWidth="2" />
        <circle cx="24" cy="34" r="6" stroke="currentColor" strokeWidth="2" />
        <path d="M20 20L28 28" stroke="currentColor" strokeWidth="1.5" strokeLinecap="round" />
        <path d="M28 20L20 28" stroke="currentColor" strokeWidth="1.5" strokeLinecap="round" />
      </svg>
    ),
    card3: (
      <svg viewBox="0 0 48 48" fill="none" xmlns="http://www.w3.org/2000/svg" aria-hidden="true">
        <path d="M24 8L8 16V28C8 36 14 42 24 44C34 42 40 36 40 28V16L24 8Z" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" />
        <path d="M18 24L22 28L30 20" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" />
      </svg>
    )
  }
};

const CheckIcon = () => (
  <svg width="18" height="18" viewBox="0 0 24 24" fill="none" aria-hidden="true">
    <circle cx="12" cy="12" r="10" stroke="currentColor" strokeWidth="1.5" />
    <path d="M8 12l2.5 2.5L16 9" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" />
  </svg>
);

// Pillar Data
const PILLARS_DATA: Record<ProductType, Pillar[]> = {
  essentials: [
    {
      id: 0,
      number: '01',
      icon: PillarIcons.essentials.pillar1,
      label: 'Comprehensive Nutritional Foundation',
      preview: 'Complete Vitamin & Mineral Profile',
      title: 'Comprehensive Nutritional Foundation',
      tagline: 'Complete Vitamin & Mineral Profile',
      benefits: [
        'All essential vitamins (A, C, D, E, K1, K2, B-complex)',
        'Full mineral spectrum (12 essential)',
        'Vitamin C: 900mg (1000% DV) - Antioxidant Support',
        'Vitamin D3: 1200 IU - From Vegan Lichen',
        'Vitamin B12: 24mcg - Bioactive Methylcobalamin',
        'Bioactive Forms: Quatrefolic®️ & Methylcobalamin for Superior Absorption'
      ]
    },
    {
      id: 1,
      number: '02',
      icon: PillarIcons.essentials.pillar2,
      label: 'Superior Digestive Health Support',
      preview: '4-Tier Digestive System',
      title: 'Superior Digestive Health Support',
      tagline: '4-Tier Digestive System (Unique Advantage)',
      benefits: [
        'PREBIOTICS: Guar Fiber & Agave Inulin (Feeds beneficial bacteria)',
        'PROBIOTICS: 10 Billion CFU (Bacillus subtilis DE111® & Bacillus coagulans BC99®)',
        'POSTBIOTICS: Lactobacillus casei 327 (FloraSMART®) - Clinically Proven for Regularity',
        'DIGESTIVE ENZYMES: Complete Enzyme Complex (Amylase, Protease, Lipase, Cellulase)'
      ]
    },
    {
      id: 2,
      number: '03',
      icon: PillarIcons.essentials.pillar3,
      label: 'Powerful Superfood & Antioxidant Complex',
      preview: '4,100mg Raw Superfoods Blend',
      title: 'Powerful Superfood & Antioxidant Complex',
      tagline: '4,100mg Raw Superfoods Blend',
      benefits: [
        'Organic Greens: Spinach, Beet Root, Carrot Root',
        'Antioxidant Fruits: Blueberry, Pomegranate, Cranberry, Acai',
        'Functional Herbs: Milk Thistle, Turmeric, Ginger, Elderberry',
        'Specialty: Sea Moss, Grape Seed Extract, Green Tea'
      ]
    },
    {
      id: 3,
      number: '04',
      icon: PillarIcons.essentials.pillar4,
      label: 'Specialized Health Complexes',
      preview: 'Targeted Support for Performance',
      title: 'Specialized Health Complexes',
      tagline: 'Targeted Support for Performance',
      benefits: [
        'Advanced Hydration & Electrolyte (2,500mg): Hydra Electrolytes Complex',
        'Essential Amino Acid & Recovery (1,165mg): Amino & Renew Complex',
        'Joint & Muscle Health (1,000mg): MSM, Supports Collagen',
        'Adaptogenic & Mushroom Support (200mg): Ashwagandha, Reishi, Lion\'s Mane',
        'Heart Health Support (100mg): CoQ10, Cellular'
      ]
    },
    {
      id: 4,
      number: '05',
      icon: PillarIcons.essentials.pillar5,
      label: 'Cell Rejuvenation Technology 8™',
      preview: 'Proprietary Longevity Complex',
      title: 'Cell Rejuvenation Technology 8™',
      tagline: 'Proprietary Longevity Complex (25mg)',
      benefits: [
        'Spermidine',
        'Astaxanthin',
        'Trans-resveratrol',
        'Berberine',
        'Urolithin A',
        'Seaweed Extracts'
      ]
    }
  ],
  longevity: [
    {
      id: 0,
      number: '01',
      icon: PillarIcons.longevity.pillar1,
      label: 'Cellular Foundation Builder',
      preview: 'Essential Amino Acid Support',
      title: 'Cellular Foundation Builder',
      tagline: 'Essential Amino Acid Support (5g)',
      description: 'Provides therapeutic dosages of two critical longevity amino acids that naturally decline with age, supporting cellular protection and longevity pathways.',
      benefits: [
        'L-Glycine 3,000mg',
        'Taurine 2,000mg'
      ]
    },
    {
      id: 1,
      number: '02',
      icon: PillarIcons.longevity.pillar2,
      label: 'Cellular Protection Activator',
      preview: 'Senolytic Complex',
      title: 'Cellular Protection Activator',
      tagline: 'Senolytic Complex (600mg)',
      description: 'Triple senolytic complex that targets cellular senescence—one of the primary hallmarks of aging—through complementary compounds that eliminate \'zombie cells\'.',
      benefits: [
        'Trans-Resveratrol 250mg',
        'Quercetin Phytosome 250mg',
        'Fisetin 100mg'
      ]
    },
    {
      id: 2,
      number: '03',
      icon: PillarIcons.longevity.pillar3,
      label: 'NMN NAD+ Energy Booster',
      preview: 'Mitochondrial Support',
      title: 'NMN NAD+ Energy Booster',
      tagline: 'Mitochondrial Support (310mg)',
      description: 'Combines the most direct NAD+ precursor with a mitochondrial biogenesis promoter for comprehensive cellular energy support and DNA repair.',
      benefits: [
        'NMN 300mg',
        'PQQ 10mg'
      ]
    },
    {
      id: 3,
      number: '04',
      icon: PillarIcons.longevity.pillar4,
      label: 'Metabolic AMPK/SIRT1 Activator',
      preview: 'Metabolic Switch',
      title: 'Metabolic AMPK/SIRT1 Activator',
      tagline: 'Metabolic Switch (106mg)',
      description: 'Enhanced bioavailability and metabolic support combined with powerful antioxidant protection for optimal metabolic function and cellular stress resistance.',
      benefits: [
        'Dihydroberberine 100mg',
        'Astaxanthin 6mg'
      ]
    },
    {
      id: 4,
      number: '05',
      icon: PillarIcons.longevity.pillar5,
      label: 'Cellular Renewal Activator',
      preview: 'Autophagy Support',
      title: 'Cellular Renewal Activator',
      tagline: 'Autophagy Support (3mg)',
      description: 'Promotes autophagy—the cellular \'cleaning\' process essential for healthy aging—removing damaged proteins and organelles for optimal cellular function.',
      benefits: [
        'Spermidine 3mg'
      ]
    }
  ]
};

const FEATURE_CARDS: Record<ProductType, FeatureCard[]> = {
  essentials: [
    {
      icon: FeatureIcons.essentials.card1,
      title: 'Superior Ingredient Forms',
      text: 'Bioactive Vitamins & Organic Minerals for maximum absorption.'
    },
    {
      icon: FeatureIcons.essentials.card2,
      title: 'Clean Formulation',
      text: 'No Stevia (Uses Reb M), Allergen-Free, Non-GMO, Vegan-Friendly.'
    },
    {
      icon: FeatureIcons.essentials.card3,
      title: 'Branded Ingredients',
      text: 'Quatrefolic®, VegD3®, FloraSMART®, AstaPure®.'
    }
  ],
  longevity: [
    {
      icon: FeatureIcons.longevity.card1,
      title: 'Therapeutic Dosing',
      text: 'Clinically relevant doses of key longevity ingredients like NMN and Spermidine.'
    },
    {
      icon: FeatureIcons.longevity.card2,
      title: 'Synergistic Formulation',
      text: 'Ingredients selected to work together to amplify cellular repair and renewal.'
    },
    {
      icon: FeatureIcons.longevity.card3,
      title: 'Premium Purity',
      text: 'Rigorous testing for purity and potency, free from fillers and artificial additives.'
    }
  ]
};

export const FivePillars = () => {
  const [activeProduct, setActiveProduct] = useState<ProductType>('essentials');
  const [activePillar, setActivePillar] = useState<Record<ProductType, number>>({
    essentials: 0,
    longevity: 0
  });
  const [vantaLoaded, setVantaLoaded] = useState(false);

  const isEssentials = activeProduct === 'essentials';
  const currentPillars = PILLARS_DATA[activeProduct];
  const currentActivePillarIndex = activePillar[activeProduct];
  const currentPillar = currentPillars[currentActivePillarIndex];
  const currentFeatures = FEATURE_CARDS[activeProduct];

  // Handle product switch
  const handleProductSwitch = (product: ProductType) => {
    setActiveProduct(product);
    
    // Notify Vanta.js to switch theme
    if (typeof window !== 'undefined' && window.__vantaSwitchTheme) {
      window.__vantaSwitchTheme(product);
    }
  };

  // Handle pillar selection
  const handlePillarClick = (index: number) => {
    setActivePillar(prev => ({
      ...prev,
      [activeProduct]: index
    }));
  };

  return (
    <>
      {/* Vanta.js Scripts - Only load on desktop */}
      <Script
        id="vanta-init"
        strategy="afterInteractive"
        dangerouslySetInnerHTML={{
          __html: `
(function() {
  'use strict';
  
  var isMobile = window.innerWidth <= 749;
  var prefersReducedMotion = window.matchMedia('(prefers-reduced-motion: reduce)').matches;
  if (isMobile || prefersReducedMotion) return;
  
  var SCRIPTS = {
    three: 'https://cdnjs.cloudflare.com/ajax/libs/three.js/r134/three.min.js',
    vanta: 'https://cdnjs.cloudflare.com/ajax/libs/vanta/0.5.24/vanta.cells.min.js'
  };
  
  var THEMES = {
    essentials: { backgroundColor: 0xF5EAEA, color1: 0xA40011, color2: 0xFF9693 },
    longevity: { backgroundColor: 0xFAF7EE, color1: 0xE78D2D, color2: 0xF5A855 }
  };
  
  var vantaEffect = null;
  var currentTheme = 'essentials';
  var isVisible = true;
  var loadPromise = null;
  
  function injectScript(src) {
    return new Promise(function(resolve, reject) {
      if (src.indexOf('three') > -1 && window.THREE) return resolve();
      if (src.indexOf('vanta') > -1 && window.VANTA) return resolve();
      
      var script = document.createElement('script');
      script.src = src;
      script.async = true;
      script.crossOrigin = 'anonymous';
      script.onload = resolve;
      script.onerror = reject;
      document.head.appendChild(script);
    });
  }
  
  function loadAllScripts() {
    if (loadPromise) return loadPromise;
    
    loadPromise = injectScript(SCRIPTS.three)
      .then(function() { return injectScript(SCRIPTS.vanta); })
      .catch(function(e) { 
        console.warn('[Vanta] Script load failed:', e);
        loadPromise = null;
      });
    
    return loadPromise;
  }
  
  function initVanta() {
    var container = document.getElementById('pillars-vanta-bg');
    var section = document.getElementById('pillars-health-section');
    
    if (!container || !window.VANTA || !window.THREE) {
      console.warn('[Vanta] Missing dependencies');
      return;
    }
    
    currentTheme = section && section.dataset.activeProduct || 'essentials';
    var theme = THEMES[currentTheme];
    
    try {
      vantaEffect = window.VANTA.CELLS({
        el: container,
        THREE: window.THREE,
        mouseControls: false,
        touchControls: false,
        gyroControls: false,
        minHeight: 200,
        minWidth: 200,
        scale: 0.7,
        size: 0.4,
        speed: 0.8,
        backgroundColor: theme.backgroundColor,
        color1: theme.color1,
        color2: theme.color2
      });
      
      if (vantaEffect.renderer) {
        vantaEffect.renderer.setPixelRatio(Math.min(window.devicePixelRatio, 1.5));
        vantaEffect.renderer.powerPreference = 'high-performance';
      }
      
      var visObserver = new IntersectionObserver(function(entries) {
        isVisible = entries[0].isIntersecting;
        toggleRendering();
      }, { threshold: 0 });
      visObserver.observe(section);
      
      document.addEventListener('visibilitychange', toggleRendering);
      
      container.style.opacity = '1';
      
    } catch (e) {
      console.warn('[Vanta] Init failed:', e);
    }
  }
  
  function toggleRendering() {
    if (!vantaEffect || !vantaEffect.renderer) return;
    
    if (isVisible && !document.hidden) {
      vantaEffect.renderer.setAnimationLoop(vantaEffect.onUpdate.bind(vantaEffect));
    } else {
      vantaEffect.renderer.setAnimationLoop(null);
    }
  }
  
  window.__vantaSwitchTheme = function(theme) {
    if (!vantaEffect || currentTheme === theme || !THEMES[theme]) return;
    currentTheme = theme;
    try {
      vantaEffect.setOptions(THEMES[theme]);
    } catch (e) {}
  };
  
  function setup() {
    var section = document.getElementById('pillars-health-section');
    if (!section) return;
    
    var observer = new IntersectionObserver(function(entries) {
      if (entries[0].isIntersecting) {
        observer.disconnect();
        loadAllScripts().then(initVanta);
      }
    }, { 
      rootMargin: '500px 0px',
      threshold: 0 
    });
    
    observer.observe(section);
  }
  
  if (document.getElementById('pillars-health-section')) {
    setup();
  } else {
    document.addEventListener('DOMContentLoaded', setup);
  }
  
})();
          `
        }}
      />

      <section 
        className="relative overflow-hidden"
        style={{
          padding: '80px 0 100px',
          background: isEssentials ? '#FFFFFF' : 'repeating-linear-gradient(0deg, transparent 0px, transparent 70px, rgba(180, 140, 30, 0.07) 70px, rgba(180, 140, 30, 0.07) 71px), repeating-linear-gradient(90deg, transparent 0px, transparent 70px, rgba(180, 140, 30, 0.05) 70px, rgba(180, 140, 30, 0.05) 71px), linear-gradient(180deg, #FAF7EE 0%, #FFFDF5 15%, #F8F4E8 40%, #FAF7EE 70%, rgba(231, 141, 45, 0.08) 100%)'
        }}
        id="pillars-health-section"
        data-active-product={activeProduct}
      >
        {/* Vanta.js Background - Desktop only */}
        <div 
          id="pillars-vanta-bg" 
          className="hidden lg:block absolute inset-0 pointer-events-none opacity-0"
          style={{
            backfaceVisibility: 'hidden',
            WebkitBackfaceVisibility: 'hidden',
            transform: 'translateZ(0)',
            transition: 'opacity 0.8s ease-out'
          }}
          aria-hidden="true"
        />

        {/* Vanta Overlay */}
        <div 
          className="absolute inset-0 pointer-events-none z-[1]"
          style={{
            background: isEssentials 
              ? 'linear-gradient(180deg, rgba(245, 234, 234, 0.92) 0%, rgba(245, 234, 234, 0.75) 10%, rgba(245, 234, 234, 0.65) 20%, rgba(245, 234, 234, 0.5) 30%, rgba(245, 234, 234, 0.3) 40%, rgba(245, 234, 234, 0.15) 50%, rgba(245, 234, 234, 0.05) 60%, transparent 70%, transparent 100%)'
              : 'linear-gradient(180deg, rgba(250, 247, 238, 0.92) 0%, rgba(250, 247, 238, 0.75) 10%, rgba(250, 247, 238, 0.65) 20%, rgba(250, 247, 238, 0.5) 30%, rgba(250, 247, 238, 0.3) 40%, rgba(248, 244, 232, 0.15) 50%, rgba(250, 247, 238, 0.05) 60%, transparent 70%, transparent 100%)',
            transition: 'background 550ms cubic-bezier(0.25, 0.46, 0.45, 0.94)'
          }}
          aria-hidden="true"
        />

        {/* Mobile Background Images */}
        {isEssentials && (
          <div className="lg:hidden absolute inset-0 overflow-hidden pointer-events-none" aria-hidden="true">
            <img
              src="//im8health.com/cdn/shop/files/Screenshot_2025-12-22_at_7.44.31_PM.png?v=1766404140&width=1200"
              srcSet="//im8health.com/cdn/shop/files/Screenshot_2025-12-22_at_7.44.31_PM.png?v=1766404140&width=600 600w, //im8health.com/cdn/shop/files/Screenshot_2025-12-22_at_7.44.31_PM.png?v=1766404140&width=900 900w, //im8health.com/cdn/shop/files/Screenshot_2025-12-22_at_7.44.31_PM.png?v=1766404140&width=1200 1200w"
              sizes="100vw"
              alt=""
              loading="eager"
              className="w-full h-full object-cover object-[center_top]"
            />
          </div>
        )}
        {!isEssentials && (
          <div className="lg:hidden absolute inset-0 overflow-hidden pointer-events-none" aria-hidden="true">
            <img
              src="//im8health.com/cdn/shop/files/Screenshot_2025-12-22_at_7.45.28_PM.png?v=1766404140&width=1200"
              srcSet="//im8health.com/cdn/shop/files/Screenshot_2025-12-22_at_7.45.28_PM.png?v=1766404140&width=600 600w, //im8health.com/cdn/shop/files/Screenshot_2025-12-22_at_7.45.28_PM.png?v=1766404140&width=900 900w, //im8health.com/cdn/shop/files/Screenshot_2025-12-22_at_7.45.28_PM.png?v=1766404140&width=1200 1200w"
              sizes="100vw"
              alt=""
              loading="eager"
              className="w-full h-full object-cover object-[center_top]"
            />
          </div>
        )}

        {/* Content Container */}
        <div className="relative z-[1] max-w-[1400px] mx-auto px-5 md:px-10 xl:px-[60px]">
          {/* Product Toggle */}
          <div className="flex justify-center mb-12 lg:mb-[72px]">
            <div 
              className="inline-flex relative bg-white rounded-full p-1.5 min-w-fit"
              style={{
                boxShadow: '0 4px 24px rgba(80, 0, 11, 0.08), inset 0 1px 0 rgba(255, 255, 255, 0.8)',
                border: '1px solid rgba(80, 0, 11, 0.06)'
              }}
              role="tablist"
              aria-label="Product selection"
            >
              <button
                onClick={() => handleProductSwitch('essentials')}
                className={`relative z-[2] inline-flex items-center justify-center px-6 py-3.5 md:px-8 md:py-4 border-none bg-transparent text-[13px] md:text-sm font-medium tracking-[0.03em] cursor-pointer transition-all duration-[280ms] whitespace-nowrap flex-1 min-w-0 ${
                  isEssentials ? 'text-white scale-[1.02]' : 'text-[#7B1E2A]'
                }`}
                style={{
                  fontFamily: 'Aeonik, sans-serif',
                  textShadow: isEssentials ? '0 1px 2px rgba(0, 0, 0, 0.15)' : 'none',
                  transitionTimingFunction: 'cubic-bezier(0.33, 1, 0.68, 1)'
                }}
                role="tab"
                aria-selected={isEssentials}
              >
                Daily Ultimate Essentials
              </button>
              <button
                onClick={() => handleProductSwitch('longevity')}
                className={`relative z-[2] inline-flex items-center justify-center px-6 py-3.5 md:px-8 md:py-4 border-none bg-transparent text-[13px] md:text-sm font-medium tracking-[0.03em] cursor-pointer transition-all duration-[280ms] whitespace-nowrap flex-1 min-w-0 ${
                  !isEssentials ? 'text-white scale-[1.02]' : 'text-[#7B1E2A]'
                }`}
                style={{
                  fontFamily: 'Aeonik, sans-serif',
                  textShadow: !isEssentials ? '0 1px 2px rgba(0, 0, 0, 0.15)' : 'none',
                  transitionTimingFunction: 'cubic-bezier(0.33, 1, 0.68, 1)'
                }}
                role="tab"
                aria-selected={!isEssentials}
              >
                Daily Ultimate Longevity
              </button>
              
              {/* Sliding indicator */}
              <span
                className="absolute top-1.5 h-[calc(100%-12px)] w-[calc(50%-6px)] rounded-full z-[1] transition-all duration-[500ms]"
                style={{
                  left: isEssentials ? '6px' : 'calc(50%)',
                  background: isEssentials 
                    ? 'linear-gradient(135deg, #50000B 0%, #A40011 100%)'
                    : 'linear-gradient(135deg, #E78D2D 0%, #3A0000 100%)',
                  boxShadow: isEssentials
                    ? '0 4px 16px rgba(80, 0, 11, 0.25), 0 2px 4px rgba(164, 0, 17, 0.15)'
                    : '0 4px 16px rgba(231, 141, 45, 0.3), 0 2px 4px rgba(231, 141, 45, 0.2)',
                  transitionTimingFunction: 'cubic-bezier(0.33, 1, 0.68, 1)'
                }}
                aria-hidden="true"
              />
            </div>
          </div>

          {/* Header */}
          <header className="text-center mb-12 lg:mb-[72px] relative">
            <span 
              className="inline-block text-[11px] font-semibold tracking-[0.2em] uppercase text-white mb-6 px-6 py-2.5 rounded-full border-none"
              style={{
                fontFamily: 'Aeonik, sans-serif',
                background: isEssentials 
                  ? 'linear-gradient(135deg, #50000B 0%, #A40011 100%)'
                  : 'linear-gradient(135deg, #3A0000 0%, #E78D2D 100%)',
                boxShadow: isEssentials
                  ? '0 4px 16px rgba(164, 0, 17, 0.25), 0 2px 4px rgba(80, 0, 11, 0.15)'
                  : '0 4px 16px rgba(231, 141, 45, 0.3), 0 2px 4px rgba(231, 141, 45, 0.2)'
              }}
            >
              {isEssentials ? 'Comprehensive Wellness' : 'Advanced Longevity Science'}
            </span>
            <h2 
              className="text-[clamp(32px,6vw,56px)] font-normal leading-[1.1] tracking-[-0.02em] m-0 mb-5"
              style={{ fontFamily: 'ABC Arizona Flare, serif', color: '#50000b' }}
            >
              {isEssentials ? '5 Pillars of Total Health' : '5 Pillars of Longevity'}
            </h2>
            <p 
              className="text-[clamp(15px,2vw,18px)] font-normal leading-[1.7] max-w-[680px] mx-auto m-0 opacity-90"
              style={{ color: '#50000b', fontFamily: 'Aeonik, sans-serif' }}
            >
              {isEssentials 
                ? 'A holistic approach to wellness, addressing every dimension of your health with precision-formulated ingredients.'
                : 'Cutting-edge science meets ancient wisdom to optimize your healthspan and support graceful aging.'}
            </p>
            <div 
              className="w-[60px] h-[3px] rounded-sm mt-7 mx-auto"
              style={{
                background: isEssentials
                  ? 'linear-gradient(90deg, #50000B 0%, #FF9693 100%)'
                  : 'linear-gradient(90deg, #3A0000 0%, #F5A855 100%)'
              }}
            />
          </header>

          {/* Interactive Section */}
          <div className="grid gap-6 lg:grid-cols-[380px_1fr] lg:gap-10 xl:grid-cols-[420px_1fr] xl:gap-14 mb-16 lg:mb-20">
            {/* Sidebar Navigation */}
            <nav className="flex flex-col gap-2 lg:gap-3" role="tablist" aria-label="Select a pillar">
              {currentPillars.map((pillar, index) => (
                <button
                  key={pillar.id}
                  onClick={() => handlePillarClick(index)}
                  className={`relative flex items-center gap-4 lg:gap-5 p-4 lg:p-5 rounded-2xl lg:rounded-[20px] cursor-pointer text-left overflow-hidden transition-all duration-[280ms] ${
                    currentActivePillarIndex === index 
                      ? 'translate-x-1'
                      : 'hover:translate-x-[3px]'
                  }`}
                  style={{
                    background: currentActivePillarIndex === index
                      ? isEssentials
                        ? 'linear-gradient(145deg, #A40011 0%, #50000B 60%, #3A0008 100%)'
                        : 'linear-gradient(145deg, #E78D2D 0%, #3A0000 70%, #3A0000 100%)'
                      : 'linear-gradient(145deg, rgba(255, 255, 255, 0.95) 0%, rgba(245, 234, 234, 0.9) 50%, rgba(255, 240, 240, 0.85) 100%)',
                    backdropFilter: currentActivePillarIndex === index ? 'none' : 'blur(12px)',
                    WebkitBackdropFilter: currentActivePillarIndex === index ? 'none' : 'blur(12px)',
                    borderWidth: '1px',
                    borderStyle: 'solid',
                    borderColor: currentActivePillarIndex === index
                      ? isEssentials ? '#A40011' : '#E78D2D'
                      : 'rgba(164, 0, 17, 0.08)',
                    boxShadow: currentActivePillarIndex === index
                      ? '0 8px 32px rgba(164, 0, 17, 0.18), 0 2px 8px rgba(80, 0, 11, 0.08), inset 0 1px 0 rgba(255, 255, 255, 0.12)'
                      : '0 4px 20px rgba(164, 0, 17, 0.06), 0 1px 4px rgba(80, 0, 11, 0.03), inset 0 1px 0 rgba(255, 255, 255, 0.9)',
                    transitionTimingFunction: 'cubic-bezier(0.33, 1, 0.68, 1)'
                  }}
                  role="tab"
                  aria-selected={currentActivePillarIndex === index}
                >
                  {/* Number badge */}
                  <span 
                    className="absolute top-2 left-3 text-[10px] font-medium transition-all duration-[280ms]"
                    style={{
                      fontFamily: 'Aeonik, sans-serif',
                      color: currentActivePillarIndex === index ? 'rgba(255, 255, 255, 0.5)' : '#949596',
                      opacity: currentActivePillarIndex === index ? 1 : 0.6
                    }}
                  >
                    {pillar.number}
                  </span>

                  {/* Icon */}
                  <div 
                    className={`flex-shrink-0 w-11 h-11 lg:w-[52px] lg:h-[52px] flex items-center justify-center rounded-xl lg:rounded-[14px] transition-all duration-[280ms]`}
                    style={{
                      background: currentActivePillarIndex === index
                        ? 'rgba(255, 255, 255, 0.15)'
                        : isEssentials
                          ? 'linear-gradient(135deg, rgba(80, 0, 11, 0.06) 0%, rgba(80, 0, 11, 0.02) 100%)'
                          : 'linear-gradient(135deg, rgba(231, 141, 45, 0.1) 0%, rgba(231, 141, 45, 0.03) 100%)',
                      color: currentActivePillarIndex === index 
                        ? '#fff' 
                        : isEssentials ? '#50000B' : '#E78D2D'
                    }}
                  >
                    <div className="w-[60%] h-[60%]">
                      {pillar.icon}
                    </div>
                  </div>

                  {/* Text */}
                  <div className="flex-1 min-w-0 flex flex-col gap-1">
                    <span 
                      className={`text-[15px] lg:text-base font-semibold leading-[1.3] transition-colors duration-[280ms]`}
                      style={{ 
                        fontFamily: 'Aeonik, sans-serif',
                        color: currentActivePillarIndex === index ? '#fff' : '#50000B'
                      }}
                    >
                      {pillar.label}
                    </span>
                    <span 
                      className="text-xs leading-[1.4] transition-colors duration-[280ms]"
                      style={{ 
                        fontFamily: 'Aeonik, sans-serif',
                        color: currentActivePillarIndex === index ? 'rgba(255, 255, 255, 0.7)' : '#7B1E2A'
                      }}
                    >
                      {pillar.preview}
                    </span>
                  </div>

                  {/* Arrow */}
                  <div 
                    className={`flex-shrink-0 transition-all duration-[280ms] ${
                      currentActivePillarIndex === index 
                        ? 'opacity-80 translate-x-0 text-white' 
                        : 'opacity-0 -translate-x-2'
                    }`}
                    style={{ color: currentActivePillarIndex === index ? '#fff' : '#50000B' }}
                  >
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2">
                      <path d="M9 18l6-6-6-6" />
                    </svg>
                  </div>

                  {/* Active line */}
                  {currentActivePillarIndex === index && (
                    <span className="absolute left-0 top-1/2 -translate-y-1/2 w-1 h-[60%] bg-white rounded-r" />
                  )}
                </button>
              ))}
            </nav>

            {/* Content Panel */}
            <div 
              className="relative rounded-[28px] lg:rounded-[36px] overflow-hidden min-h-[420px] lg:min-h-[520px]"
              style={{
                background: isEssentials
                  ? 'linear-gradient(145deg, rgba(255, 255, 255, 0.98) 0%, rgba(245, 234, 234, 0.95) 50%, rgba(255, 245, 245, 0.92) 100%)'
                  : 'linear-gradient(145deg, rgba(255, 255, 255, 0.98) 0%, rgba(255, 250, 240, 0.95) 50%, rgba(255, 252, 245, 0.92) 100%)',
                backdropFilter: 'blur(24px)',
                WebkitBackdropFilter: 'blur(24px)',
                borderWidth: '2px',
                borderStyle: 'solid',
                borderColor: isEssentials ? 'rgba(164, 0, 17, 0.08)' : 'rgba(231, 141, 45, 0.15)',
                boxShadow: isEssentials
                  ? '0 24px 64px rgba(164, 0, 17, 0.12), 0 8px 24px rgba(80, 0, 11, 0.06), 0 0 80px rgba(164, 0, 17, 0.08), inset 0 1px 0 rgba(255, 255, 255, 0.95)'
                  : '0 24px 64px rgba(231, 141, 45, 0.15), 0 8px 24px rgba(231, 141, 45, 0.08), 0 0 80px rgba(231, 141, 45, 0.1), inset 0 1px 0 rgba(255, 255, 255, 0.95)'
              }}
              aria-live="polite"
            >
              {/* Decorative overlay */}
              <div 
                className="absolute top-0 left-0 right-0 h-[300px] pointer-events-none z-0"
                style={{
                  background: isEssentials
                    ? 'linear-gradient(180deg, rgba(164, 0, 17, 0.06) 0%, rgba(164, 0, 17, 0.02) 50%, transparent 100%)'
                    : 'linear-gradient(180deg, rgba(231, 141, 45, 0.08) 0%, rgba(231, 141, 45, 0.03) 50%, transparent 100%)'
                }}
              />
              
              {/* Corner accent */}
              <div 
                className="absolute top-0 right-0 w-40 h-40 pointer-events-none"
                style={{
                  background: isEssentials
                    ? 'linear-gradient(135deg, transparent 50%, rgba(80, 0, 11, 0.03) 50%)'
                    : 'linear-gradient(135deg, transparent 50%, rgba(231, 141, 45, 0.05) 50%)'
                }}
              />

              {/* Watermark */}
              <span 
                className="absolute -top-5 -right-2.5 text-[clamp(180px,24vw,280px)] font-light italic leading-none pointer-events-none select-none"
                style={{
                  fontFamily: 'ABC Arizona Flare, serif',
                  color: isEssentials ? 'rgba(80, 0, 11, 0.025)' : 'rgba(231, 141, 45, 0.04)'
                }}
                aria-hidden="true"
              >
                {currentPillar.number}
              </span>

              {/* Panel Content */}
              <div className="relative z-[1] p-7 md:p-11 lg:p-[52px]">
                {/* Header */}
                <div className="flex items-start justify-between mb-7">
                  <div 
                    className="w-[72px] h-[72px] md:w-[88px] md:h-[88px] flex items-center justify-center rounded-[20px] md:rounded-[24px]"
                    style={{
                      background: isEssentials
                        ? 'linear-gradient(135deg, rgba(80, 0, 11, 0.08) 0%, rgba(80, 0, 11, 0.03) 100%)'
                        : 'linear-gradient(135deg, rgba(231, 141, 45, 0.12) 0%, rgba(231, 141, 45, 0.04) 100%)',
                      color: isEssentials ? '#50000B' : '#E78D2D',
                      border: isEssentials ? '1px solid rgba(80, 0, 11, 0.06)' : '1px solid rgba(231, 141, 45, 0.15)'
                    }}
                  >
                    <div className="w-[55%] h-[55%]">
                      {currentPillar.icon}
                    </div>
                  </div>

                  <div 
                    className="inline-flex items-center px-4 py-2 rounded-full text-[11px] font-semibold tracking-[0.1em] uppercase text-white"
                    style={{
                      fontFamily: 'Aeonik, sans-serif',
                      background: isEssentials ? '#50000B' : '#E78D2D',
                      boxShadow: isEssentials 
                        ? '0 2px 8px rgba(80, 0, 11, 0.2)' 
                        : '0 2px 8px rgba(231, 141, 45, 0.3)'
                    }}
                  >
                    Pillar {currentPillar.number}
                  </div>
                </div>

                {/* Body */}
                <div className="max-w-[540px]">
                  <h3 
                    className="text-[clamp(26px,4vw,38px)] font-normal leading-[1.15] tracking-[-0.01em] m-0 mb-3"
                    style={{ 
                      fontFamily: 'ABC Arizona Flare, serif', 
                      color: '#50000B'
                    }}
                  >
                    {currentPillar.title}
                  </h3>

                  {/* Meta line */}
                  <div className="flex items-center gap-4 mb-7">
                    <span 
                      className="w-8 h-px flex-shrink-0 opacity-40"
                      style={{ background: isEssentials ? '#50000B' : '#3A0000' }}
                    />
                    <span 
                      className="text-[11px] font-medium tracking-[0.18em] uppercase opacity-70"
                      style={{ 
                        fontFamily: 'Aeonik, sans-serif',
                        color: isEssentials ? '#50000B' : '#3A0000'
                      }}
                    >
                      {currentPillar.tagline}
                    </span>
                  </div>

                  {/* Description (longevity only) */}
                  {currentPillar.description && (
                    <div className="mb-6">
                      <h4 
                        className="text-xs font-semibold tracking-[0.15em] uppercase mb-3"
                        style={{ 
                          fontFamily: 'Aeonik, sans-serif',
                          color: isEssentials ? '#50000B' : '#3A0000'
                        }}
                      >
                        Key Benefits
                      </h4>
                      <p 
                        className="text-[15px] md:text-base leading-[1.75] m-0"
                        style={{ 
                          fontFamily: 'Aeonik, sans-serif',
                          color: '#7B1E2A'
                        }}
                      >
                        {currentPillar.description}
                      </p>
                    </div>
                  )}

                  {/* Benefits */}
                  <div className="pt-6 border-t" style={{ borderColor: 'rgba(80, 0, 11, 0.06)' }}>
                    <h4 
                      className="text-xs font-semibold tracking-[0.15em] uppercase mb-4"
                      style={{ 
                        fontFamily: 'Aeonik, sans-serif',
                        color: isEssentials ? '#50000B' : '#3A0000'
                      }}
                    >
                      Key Ingredients
                    </h4>
                    <ul className="list-none p-0 m-0 flex flex-col gap-3">
                      {currentPillar.benefits.map((benefit, idx) => (
                        <li key={idx} className="flex items-center gap-3 text-sm" style={{ fontFamily: 'Aeonik, sans-serif', color: '#50000B' }}>
                          <div className="flex-shrink-0" style={{ color: isEssentials ? '#50000B' : '#E78D2D' }}>
                            <CheckIcon />
                          </div>
                          <span>{benefit}</span>
                        </li>
                      ))}
                    </ul>
                  </div>
                </div>
              </div>
            </div>
          </div>

          {/* Feature Cards */}
          <div className="relative">
            <div className="grid grid-cols-2 md:grid-cols-3 gap-4 md:gap-6">
              {currentFeatures.map((card, idx) => (
                <div
                  key={idx}
                  className="relative p-7 md:p-9 bg-white border rounded-[20px] md:rounded-[24px] text-center overflow-hidden transition-all duration-[280ms] hover:-translate-y-0.5"
                  style={{
                    borderColor: 'rgba(80, 0, 11, 0.06)',
                    transitionTimingFunction: 'cubic-bezier(0.33, 1, 0.68, 1)',
                    boxShadow: '0 2px 8px rgba(80, 0, 11, 0.04)'
                  }}
                  onMouseEnter={(e) => {
                    e.currentTarget.style.borderColor = 'rgba(80, 0, 11, 0.12)';
                    e.currentTarget.style.boxShadow = '0 8px 32px rgba(80, 0, 11, 0.08), 0 2px 8px rgba(80, 0, 11, 0.04)';
                  }}
                  onMouseLeave={(e) => {
                    e.currentTarget.style.borderColor = 'rgba(80, 0, 11, 0.06)';
                    e.currentTarget.style.boxShadow = '0 2px 8px rgba(80, 0, 11, 0.04)';
                  }}
                >
                  <div 
                    className="relative w-14 h-14 md:w-16 md:h-16 mx-auto mb-5 flex items-center justify-center rounded-2xl"
                    style={{
                      background: isEssentials
                        ? 'linear-gradient(135deg, rgba(80, 0, 11, 0.06) 0%, rgba(80, 0, 11, 0.02) 100%)'
                        : 'linear-gradient(135deg, rgba(231, 141, 45, 0.1) 0%, rgba(231, 141, 45, 0.03) 100%)',
                      color: isEssentials ? '#50000B' : '#E78D2D'
                    }}
                  >
                    <div className="w-[55%] h-[55%]">
                      {card.icon}
                    </div>
                  </div>
                  <h4 
                    className="text-sm md:text-[15px] font-semibold m-0 mb-2 leading-[1.3]"
                    style={{ fontFamily: 'Aeonik, sans-serif', color: '#50000B' }}
                  >
                    {card.title}
                  </h4>
                  <p 
                    className="text-[13px] m-0 leading-[1.6]"
                    style={{ fontFamily: 'Aeonik, sans-serif', color: '#7B1E2A' }}
                  >
                    {card.text}
                  </p>
                </div>
              ))}
            </div>
          </div>
        </div>
      </section>
    </>
  );
};

// Type augmentation for Vanta
declare global {
  interface Window {
    __vantaSwitchTheme?: (theme: string) => void;
  }
}
